create or replace PROCEDURE WORKSSUPPORT_WFNX_V2_GETBY
/*
	CREATED BY	:	NGUYEN THI KIM NGAN
	DATE		:	02/06/2017
	DESCRIPTION	:	N?P DANH SACH BUOC XU LY KE TIEP TRONG CONG VIEC CAN HO TRO
*/ (
    V_OUT              OUT SYS_REFCURSOR,
    V_WORKSSUPPORTID   IN EO_WORKSSUPPORT.WORKSSUPPORTID%TYPE
)
    AS
BEGIN
    OPEN V_OUT FOR

    SELECT 
        NX.NEXTWORKSSUPPORTSTEPID,
        WF.WORKSSUPPORTSTEPNAME
    FROM 
        EO_WORKSSUPPORTTYPE_WF_NX NX
    LEFT JOIN
        EO_WORKSSUPPORTTYPE_WORKFLOW WF
    ON
        NX.NEXTWORKSSUPPORTSTEPID = WF.WORKSSUPPORTSTEPID
    INNER JOIN
        EO_WORKSSUPPORT SP
    ON
        WF.WORKSSUPPORTTYPEID = SP.WORKSSUPPORTTYPEID
    WHERE 
        SP.WORKSSUPPORTID = V_WORKSSUPPORTID
    AND 
        NX.WORKSSUPPORTSTEPID = SP.CURRENTWORKSSUPPORTSTEPID
    ORDER BY
        WF.WORKSSUPPORTSTEPID ASC;
END;