create or replace PROCEDURE  WORKSSUPPORT_V2_GETBYID
/*
	CREATED BY	:	TRÝÕNG HOÀNG NHI
	DATE		:	29/07/2017
	DESCRIPTION	:	N?P THÔNG TIN CÔNG VI?C C?N H? TR?  
*/
(	
	V_WORKSSUPPORTGROUPID IN EO_WORKSSUPPORT.WORKSSUPPORTGROUPID%TYPE,	
	V_OUT OUT SYS_REFCURSOR
) 
AS
BEGIN
  OPEN V_OUT FOR
	SELECT
    WORKSSUPPORTID,    
    WORKSSUPPORTNAME,
    CREATEDDATE,   
    CURRENTPROGRESS,
    (
        SELECT
            EO_WORKSSUPPORTSTATUS.WORKSSUPPORTSTATUSNAME
            FROM
                EO_WORKSSUPPORTSTATUS EO_WORKSSUPPORTSTATUS
            INNER JOIN 
                EO_WORKSSUPPORTTYPE_WORKFLOW EO_WORKSSUPPORTTYPE_WORKFLOW
            ON 
                EO_WORKSSUPPORTSTATUS.ISDELETED = 0
            AND
                EO_WORKSSUPPORTSTATUS.WORKSSUPPORTSTATUSID = EO_WORKSSUPPORTTYPE_WORKFLOW.WORKSSUPPORTSTATUSID                
            INNER JOIN
                EO_WORKSSUPPORTPROJECT EO_WORKSSUPPORTPROJECT
            ON
                EO_WORKSSUPPORTTYPE_WORKFLOW.WORKSSUPPORTTYPEID = EO_WORKSSUPPORTPROJECT.WORKSSUPPORTTYPEID
            INNER JOIN 
                EO_WORKSSUPPORTGROUP EO_WORKSSUPPORTGROUP
            ON 
                EO_WORKSSUPPORTPROJECT.WORKSSUPPORTPROJECTID = EO_WORKSSUPPORTGROUP.WORKSSUPPORTPROJECTID
            WHERE EO_WORKSSUPPORTGROUP.WORKSSUPPORTGROUPID = V_WORKSSUPPORTGROUPID
    ) as WORKSSUPPORTSTATUSNAME
	FROM
    EO_WORKSSUPPORT
	WHERE
		EO_WORKSSUPPORT.WORKSSUPPORTGROUPID = V_WORKSSUPPORTGROUPID
    AND EO_WORKSSUPPORT.ISDELETED = 0
  ;
END;