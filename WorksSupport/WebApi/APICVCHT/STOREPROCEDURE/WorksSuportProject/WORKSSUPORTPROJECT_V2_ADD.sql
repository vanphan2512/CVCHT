-- Script was generated by Devart dbForge Studio for Oracle, Version 3.1.260.0
-- Product home page: http://www.devart.com/dbforge/oracle/studio
-- Script date 6/23/2017 1:00:36 PM
-- Server version: Oracle Database 11g Enterprise Edition Release 11.2.0.1.0 - 64bit Production With the Partitioning, OLAP, Data Mining and Real Application Testing options
-- Client version: 

CREATE OR REPLACE PROCEDURE ERP.WORKSSUPORTPROJECT_V2_ADD
/*
	Created by	:	Nguy?n Van Ph?n
	Date		:	09/06/2017
	Description	:	Thêm thông tin Tr?ng thái d? án c?n h? tr? 
*/
(
	--v_WORKSSUPPORTPROJECTID IN EO_WORKSSUPPORTPROJECT.WORKSSUPPORTPROJECTID%TYPE,
	v_WORKSSUPPORTPROJECTNAME IN EO_WORKSSUPPORTPROJECT.WORKSSUPPORTPROJECTNAME%TYPE,
	v_WORKSSUPPORTTYPEID IN EO_WORKSSUPPORTPROJECT.WORKSSUPPORTTYPEID%TYPE,
	v_DESCRIPTION IN EO_WORKSSUPPORTPROJECT.DESCRIPTION%TYPE,
	v_ORDERINDEX IN EO_WORKSSUPPORTPROJECT.ORDERINDEX%TYPE,
	v_ISACTIVE IN EO_WORKSSUPPORTPROJECT.ISACTIVE%TYPE,
	v_ISSYSTEM IN EO_WORKSSUPPORTPROJECT.ISSYSTEM%TYPE,
	v_CREATEDUSER IN EO_WORKSSUPPORTPROJECT.CREATEDUSER%TYPE,
	v_CERTIFICATESTRING IN EO_WORKSSUPPORTPROJECT_LOG.CERTIFICATESTRING%TYPE,
	v_USERHOSTADDRESS IN EO_WORKSSUPPORTPROJECT_LOG.USERHOSTADDRESS%TYPE,
	v_LOGINLOGID IN EO_WORKSSUPPORTPROJECT_LOG.LOGINLOGID%TYPE

)
AS
  T_ORDERINDEX EO_WORKSSUPPORTPROJECT.ORDERINDEX%TYPE;
BEGIN
  BEGIN 
    SELECT COUNT(ORDERINDEX) + 1 INTO T_ORDERINDEX 
    FROM 
      EO_WORKSSUPPORTPROJECT  
    WHERE ISDELETED = 0;
  END; 
	INSERT
	INTO EO_WORKSSUPPORTPROJECT
	(
		--WORKSSUPPORTPROJECTID,
		WORKSSUPPORTPROJECTNAME,
		WORKSSUPPORTTYPEID,
		DESCRIPTION,
		ORDERINDEX,
		ISACTIVE,
		ISSYSTEM,
		CREATEDUSER,
		CREATEDDATE
	)
	VALUES
	(
	  --v_WORKSSUPPORTPROJECTID,
		v_WORKSSUPPORTPROJECTNAME,
		v_WORKSSUPPORTTYPEID,
		v_DESCRIPTION,
		T_ORDERINDEX,
		v_ISACTIVE,
		v_ISSYSTEM,
		v_CREATEDUSER,
		SYSDATE

	);
	INSERT
	INTO EO_WORKSSUPPORTPROJECT_LOG
	(
	--	WORKSSUPPORTPROJECTID,
		WORKSSUPPORTPROJECTNAME,
		WORKSSUPPORTTYPEID,
		DESCRIPTION,
		ORDERINDEX,
		ISACTIVE,
		ISSYSTEM,
		UPDATEDUSER,
		UPDATEDDATE,
		LOGTYPE,
		USERHOSTADDRESS,
		CERTIFICATESTRING,
		LOGINLOGID   
	)
	VALUES
	(
	--	v_WORKSSUPPORTPROJECTID,
		v_WORKSSUPPORTPROJECTNAME,
		v_WORKSSUPPORTTYPEID,
		v_DESCRIPTION,
		T_ORDERINDEX,
		v_ISACTIVE,
		v_ISSYSTEM,
		v_CREATEDUSER,
		SYSDATE,
		1,
		v_USERHOSTADDRESS,
		v_CERTIFICATESTRING,
		v_LOGINLOGID

	);

END;
/